<div class="container">
  <!-- Local Media -->
  <div class="local-media">
    <video #localVideo autoplay muted playsinline></video>
    <div *ngIf="isScreenSharing" class="screen-share-indicator">Screen Sharing</div>
  </div>

  <!-- Remote Videos -->
  <div #remoteContainer class="remote-container">
    <div *ngFor="let userId of remoteStreams.keys()" class="remote-user" [attr.data-user-id]="userId">
      <div *ngIf="remoteStreams.get(userId)?.camera" class="video-container">
        <video
          [srcObject]="remoteStreams.get(userId)?.camera"
          [attr.data-user-id]="userId"
          data-type="camera"
          [attr.data-stream-id]="remoteStreams.get(userId)?.camera?.id"
          autoplay
          playsinline
        ></video>
        <div class="user-info">
          <span>User {{ userId }} Camera</span>
        </div>
      </div>
      <div *ngIf="remoteStreams.get(userId)?.screen" class="video-container">
        <video
          [srcObject]="remoteStreams.get(userId)?.screen"
          [attr.data-user-id]="userId"
          data-type="screen"
          [attr.data-stream-id]="remoteStreams.get(userId)?.screen?.id"
          autoplay
          playsinline
        ></video>
        <div class="user-info">
          <span>User {{ userId }} Screen</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Audio Container (hidden) -->
  <div #audioContainer style="display: none;"></div>

  <!-- Controls -->
  <div class="controls">
    <button (click)="isInCall ? leaveCall() : joinCall()" [class.active]="isInCall">
      {{ isInCall ? 'Leave' : 'Join' }} Call
    </button>
    <button (click)="toggleMic()" [class.muted]="isMicMuted">
      {{ isMicMuted ? 'Unmute' : 'Mute' }} Mic
    </button>
    <button (click)="toggleCamera()" [class.disabled]="!isCameraEnabled">
      {{ isCameraEnabled ? 'Disable' : 'Enable' }} Camera
    </button>
    <button (click)="toggleScreenShare()" [class.active]="isScreenSharing">
      {{ isScreenSharing ? 'Stop' : 'Start' }} Screen Share
    </button>
  </div>
</div>
