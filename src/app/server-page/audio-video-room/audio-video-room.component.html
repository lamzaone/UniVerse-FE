<div class="container">
  <div class="users-list">
    <div *ngFor="let user of users">
      <div class="user" [class.in-voice]="voiceUserIds.has(user.id)">
        <img [src]="user.picture" alt="User Avatar">
        <p>{{ user.name }}</p>

        <!-- Local video (only for current user) -->
        <video #localVideo autoplay muted playsinline
               *ngIf="user.id === userId && isInCall"></video>

        <!-- Remote video -->
        <video autoplay playsinline [attr.data-user-id]="user.id"
               *ngIf="user.id !== userId && voiceUserIds.has(user.id)"></video>

        <!-- Status indicators -->
        <div class="status-indicators">
          <span *ngIf="voiceUserIds.has(user.id)">🎤</span>
          <span *ngIf="remoteStreams.get(user.id)?.getVideoTracks()?.length">📷</span>
        </div>
      </div>
    </div>
  </div>

  <div class="buttons">
    <div class="button mute" (click)="toggleMic()">{{ isMicMuted ? '🔇' : '🎙️' }}</div>
    <div class="button screenshare" (click)="toggleScreenShare()">{{ isScreenSharing ? '🖥️' : '📺' }}</div>
    <div class="button camera" (click)="toggleCamera()">{{ isCameraEnabled ? '📷' : '🚫' }}</div>
    <div class="button leave" (click)="leaveCall()" [class.disabled]="!isInCall">🚪</div>
    <div class="button join" (click)="joinVoiceRoom()" [class.disabled]="isInCall">🎤</div>
  </div>

  <!-- Hidden audio container for remote audio streams -->
  <div #audioContainer style="display: none;"></div>
</div>
